<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; connect-src 'self';font-src 'self'; img-src 'self' data: https:; style-src 'self' ; script-src 'self'">

  <title>Strava Segment Hunter</title>

  <!-- Custom fonts for this theme -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

  <!-- Theme CSS -->
  <link href="css/freelancer.min.css" rel="stylesheet">
</head>

<body onload="openPage()" id="page-top">

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="#page-top">Segment Hunter</a>
      <button class="navbar-toggler navbar-toggler-right text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
        aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#today-segment">Todays Segment</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" id="todays-seg" href="#today-leaderboard">Todays Leaderboard</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#point-leaderboard">Points Leaderboard</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#help-section">Help</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Masthead -->
  <header class="masthead bg-primary text-white text-center">
    <div class="container d-flex align-items-center flex-column">

      <!-- Masthead Avatar Image -->
      <img class="masthead-avatar mb-5" src="img/portfolio/icon.png" alt="">

      <!-- Masthead Heading -->
      <h1 class="masthead-heading text-uppercase mb-0">Strava Segment Hunter</h1>

      <!-- Icon Divider -->
      <div class="divider-custom divider-light">
        <div class="divider-custom-line"></div>
        <div class="divider-custom-icon">
          <i class="fas fa-star"></i>
        </div>
        <div class="divider-custom-line"></div>
      </div>

      <!-- Masthead Subheading -->
      <p class="masthead-subheading font-weight-light mb-0">
        Check in every day to see a <a class="text-white" href="#today-segment">new segment in your area.</a> Complete the segment that day to appear on the <a class="text-white" href="#today-leaderboard">daily leaderboards. Daily leaderboard rankings</a>
        assigned points at the end of the day - a total of these points can be soon on the <a class="text-white" href="##point-leaderboard">points leaderboard </a><a class="text-white" href="#help-section">see more...</a></p>

    </div>
  </header>

  <!-- Todays Segment Section -->

  <section class="page-section portfolio" id="today-segment">
    <div class="container">

      <!-- Todays Segement Section Heading -->
      <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Todays Segment</h2>

      <!-- Icon Divider -->
      <div class="divider-custom">
        <div class="divider-custom-line"></div>
        <div class="divider-custom-icon">
          <i class="fas fa-star"></i>
        </div>
        <div class="divider-custom-line"></div>
      </div>

      <!-- Todays Segment Section Content -->
      <div class="divider-custom">
        <div class="text-center">
          <h1 class="text-secondary text-uppercase"><%-segmentInfo.name-%></h1>
          <p class="lead"><strong>Distance:</strong> <%-segmentInfo.distance-%></p>
          <p class="lead"><b>Average Grade:</b> <%-segmentInfo.average_grade-%>%</p>
          <p class="lead"><b>Number of Attempts:</b> <%-segmentInfo.efforts-%></p>
          <p class="lead"><b>Location:</b> <%-segmentInfo.location-%></p>
          <a href=<%-segmentInfo.link-%>>
            <p class="lead">Click here to view on Strava</p>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Results Section -->
  <section class="page-section bg-primary text-white mb-0" id="today-leaderboard">
    <div class="container">

      <!-- Results Section Heading -->
      <h2 class="page-section-heading text-center text-uppercase text-white"><%- clubName -%> Daily Leaderboard</h2>

      <!-- Results Divider -->
      <div class="divider-custom divider-light">
        <div class="divider-custom-line"></div>
        <div class="divider-custom-icon">
          <i class="fas fa-star"></i>
        </div>
        <div class="divider-custom-line"></div>
      </div>

      <form action="/" method="POST" id="filterTable">
        <div class="form-row">
          <div class="col">
            <select class="form-control" id="club" name="clubs">
              <%if (clubId == 0){ %>
              <option value="Public" selected>Everyone</option>
              <option value="Dromore">Dromore CC</option>
              <option value="Dromara">Dromara CC</option>
              <option value="WDW">West Down Wheelers</option>
              <%} else if(clubId ==55274){ %>
              <option value="Public">Everyone</option>
              <option value="Dromore" selected>Dromore CC</option>
              <option value="Dromara">Dromara CC</option>
              <option value="WDW">West Down Wheelers</option>
              <%} else if(clubId == 2885){ %>
              <option value="Public">Everyone</option>
              <option value="Dromore">Dromore CC</option>
              <option value="Dromara" selected>Dromara CC</option>
              <option value="WDW">West Down Wheelers</option>
              <%} else { %>
              <option value="Public">Everyone</option>
              <option value="Dromore">Dromore CC</option>
              <option value="Dromara">Dromara CC</option>
              <option value="WDW" selected>West Down Wheelers</option>
              <%} %>
            </select>
          </div>
          <div class="col">
            <button type="submit" class="btn btn-light ">Submit</button>
          </div>
        </div>
      </form>

      <br><br>

      <!-- Results Section Content -->
      <table class="table table-hover">
        <thead>
          <tr class="text-white">
            <th scope="col">Rank</th>
            <th scope="col">Name</th>
            <th scope="col">Time</th>
          </tr>
        </thead>
        <tbody>
          <% for(var i=0; i < data.length; i++) { %>
          <tr class="text-white">
            <th><%- data[i][2] %></th>
            <td><%- data[i][0] %></td>
            <td><%- data[i][1] %></td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Points Section -->
  <section class="page-section" id="point-leaderboard">
    <div class="container">

      <!-- Points Section Heading -->
      <h2 class="page-section-heading text-secondary text-center text-uppercase"><%- clubName -%> Points Leaderboard</h2>

      <!-- Points Divider -->
      <div class="divider-custom">
        <div class="divider-custom-line"></div>
        <div class="divider-custom-icon">
          <i class="fas fa-star"></i>
        </div>
        <div class="divider-custom-line"></div>
      </div>

      <!-- Points Section Content -->
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Rank</th>
            <th scope="col">Name</th>
            <th scope="col">Points</th>
          </tr>
        </thead>
        <tbody>
          <% var lastPoints = -1; %>
          <% var rank = 0; %>
          <% for(var i=0; i < db.length; i++) { %>
          <tr>
            <td><% if(db[i].points != lastPoints) {  %>
                      <% rank++ %>
                      <%-rank %>
                      <% lastPoints = db[i].points %>
                <%} else { %>
                      <%- rank %>
                <%}%></td>
            <td><%- db[i].name %></td>
            <td><%- db[i].points %></td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Todays Segment Section -->
  <section class="page-section bg-primary text-white mb-0" id="upcoming-segments">
    <div class="container">

      <!-- Todays Segement Section Heading -->
      <h2 class="page-section-heading text-center text-uppercase mb-0">Upcoming Segments</h2>

      <!-- Icon Divider -->
      <div class="divider-custom divider-light">
        <div class="divider-custom-line"></div>
        <div class="divider-custom-icon">
          <i class="fas fa-star"></i>
        </div>
        <div class="divider-custom-line"></div>
      </div>

      <!-- Todays Segment Section Content -->
      <div class="divider-custom">
        <div class="text-center">
          <h1 class="lead font-weight-bold text-uppercase">Click on the segment to see more information!</h1><br>

          <% var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];%>

          <% for(var i = 0; i < tomorrowsSegmentInfo.length; i++) { %>
              <% var date = new Date();%>
              <% date.setDate(date.getDate() + i + 1)%>
              <% var dayName = days[date.getDay()];%>
              <p class="lead"><span class="font-weight-bold"><%-dayName%></span><a class="text-white"href=<%-tomorrowsSegmentInfo[i][1]%>>: <%-tomorrowsSegmentInfo[i][0]%></a></p>
          <% } %>
        </div>
      </div>
    </div>
  </section>

  <!--Help Section -->
  <section class="page-section portfolio" id="help-section">
    <div class="container">

      <!-- Todays Segement Section Heading -->
      <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Help Section</h2>

      <!-- Icon Divider -->
      <div class="divider-custom">
        <div class="divider-custom-line"></div>
        <div class="divider-custom-icon">
          <i class="fas fa-star"></i>
        </div>
        <div class="divider-custom-line"></div>
      </div>

      <p class="lead text-center">Strava Segment Hunter is a tool built to provide a platform for some competition surrounding Strava segments. Check in daily to see the segment we
      have selected for the day. For more information check out the guides below.</p>

      <!-- Todays Segment Section Content -->
      <div class="divider-custom">
        <div class="text-center">
          <h1 class="text-secondary">POINTS</h1>
          <div class="divider-custom">
            <div class="divider-custom-line"></div>
          </div>
          <p class="lead">Complete the daily segment shown on the site to appear on the daily leaderboards. These leaderboards are broken down into different
          clubs (To appear in your club you should join the club on Strava) or all public Strava users. Points will be assigned based
          on these daily leaderboard placings at 11.45pm that evening.</p>
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">Daily Placing</th>
                <th scope="col">Points Assigned</th>
              </tr>
            </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>15</td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>10</td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>8</td>
                </tr>
                <tr>
                  <td>4</td>
                  <td>6</td>
                </tr>
                <tr>
                  <td>5</td>
                  <td>4</td>
                </tr>
                <tr>
                  <td>6</td>
                  <td>2</td>
                </tr>
                <tr>
                  <td>7th and below</td>
                  <td>1</td>
                </tr>
              </tbody>
            </table>
            <h1 class="text-secondary">CLUBS</h1>
            <div class="divider-custom">
              <div class="divider-custom-line"></div>
            </div>
            <p class="lead">To appear in one of our club leaderboards join the club on Strava. If your club does not have one now is the time to do it.
            <a href="https://www.strava.com/clubs/search">Click here to access the clubs section of Strava.</a> Upon joining, get in contact with me at jamiegregg25@gmail.com
            and I will add your club to the site!</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer text-center">
    <div class="container">
      <div class="row">

        <!-- Footer Location -->
        <div class="col-lg-4 mb-5 mb-lg-0">
          <h4 class="text-uppercase mb-4">Contact Me</h4>
          <p class="lead mb-0">To get your club added onto the leaderboard, report any bugs or to suggest new features contact me at: <p class="text-uppercase font-weight-bold">jamiegregg25@gmail.com </p>
        </div>

        <!-- Footer Social Icons -->
        <div class="col-lg-4 mb-5 mb-lg-0">
          <h4 class="text-uppercase mb-4">Developer Links</h4>
          <a class="btn btn-outline-light btn-social mx-1" href="https://www.strava.com/athletes/8460844">
            <i class="fab fa-fw fa-strava"></i>
          </a>
          <a class="btn btn-outline-light btn-social mx-1" href="https://github.com/JamieGregg">
            <i class="fab fa-fw fa-github"></i>
          </a>
        </div>

        <!-- Footer About Text -->
        <div class="col-lg-4">
          <h4 class="text-uppercase mb-4">About Segment Challenge</h4>
          <p class="lead mb-0">Complete daily segments to top the leaderboards in your club and all rides on Strava that day! Check back in every day for that days segment.</p>
        </div>

      </div>
    </div>
  </footer>

  <!-- Copyright Section -->
  <section class="copyright py-4 text-center text-white">
    <div class="container">
      <small>Copyright &copy; Jamie Gregg 2020</small>
    </div>
  </section>

  <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
  <div class="scroll-to-top d-lg-none position-fixed ">
    <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
      <i class="fa fa-chevron-up"></i>
    </a>
  </div>

  <script>
    function openPage(){
      if(<%-reload%> == true) {

        document.getElementById("todays-seg").click();
      }
    }
  </script>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Contact Form JavaScript -->
  <script src="js/jqBootstrapValidation.js"></script>
  <script src="js/contact_me.js"></script>

  <!-- Custom scripts for this template -->
  <script src="js/freelancer.min.js"></script>

</body>

</html>
